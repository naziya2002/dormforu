<!DOCTYPE html>
<!-- Created By CodingNepal -->
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>DORMFORU</title>
      <link rel="stylesheet" href="./css/login.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
   <body>
      <div class="wrapper">
         <div class="title-text">
            <div class="title login">
               Login Form
            </div>
            <div class="title signup">
               Signup Form
            </div>
         </div>
         <div class="form-container">
            <div class="slide-controls">
               <input type="radio" name="slide" id="login" checked>
               <input type="radio" name="slide" id="signup">
               <label for="login" class="slide login">Login</label>
               <label for="signup" class="slide signup">Signup</label>
               <div class="slider-tab"></div>
            </div>
            <div class="form-inner">
               <form action="#" class="login">
                  <div class="field">
                     <input type="text" placeholder="Email Address" id="email" required>
                  </div>
                  <div class="field">
                     <input type="password" placeholder="Password" id="password" required>
                  </div>
                  <div class="pass-link">
                     <a href="#">Forgot password?</a>
                  </div>
                  <div class="field btn">
                     <div class="btn-layer"></div>
                     <input type="submit" value="Login" id="signIn">
                  </div>
                  <div class="signup-link">
                     Not a member? <a href="">Signup now</a>
                  </div>
               </form>
               <form action="#" class="signup">
                <div class="field">
                    <input type="text" placeholder="UserName" id="username" required>
                 </div>
                 
                  <div class="field">
                     <input type="text" placeholder="Email Address" id="email1" required>
                  </div>
                  <div class="field">
                     <input type="password" placeholder="Password" id="password1" required>
                  </div>
                     <div class="field btn">
                     <div class="btn-layer"></div>
                     <input type="submit" value="signUp" id="signUp">
                  </div>
               </form>
            </div>
         </div>
      </div>
      <script>
         const loginText = document.querySelector(".title-text .login");
         const loginForm = document.querySelector("form.login");
         const loginBtn = document.querySelector("label.login");
         const signupBtn = document.querySelector("label.signup");
         const signupLink = document.querySelector("form .signup-link a");
         signupBtn.onclick = (()=>{
           loginForm.style.marginLeft = "-50%";
           loginText.style.marginLeft = "-50%";
         });
         loginBtn.onclick = (()=>{
           loginForm.style.marginLeft = "0%";
           loginText.style.marginLeft = "0%";
         });
         signupLink.onclick = (()=>{
           signupBtn.click();
           return false;
         });
      </script>

      <script type="module">
        // Import the functions you need from the SDKs you need
        
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";
        import { getDatabase,set,ref } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-database.js";
               
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-analytics.js";
          import { getAuth, signInWithEmailAndPassword,signOut,createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-auth.js";
           
          
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          const firebaseConfig = {
            apiKey: "AIzaSyCTRKcJXV3blzAo3_J1ZpVrRZIgbA1_RKA",
            authDomain: "dormforu-7b616.firebaseapp.com",
            databaseURL: "https://dormforu-7b616-default-rtdb.firebaseio.com",
            projectId: "dormforu-7b616",
            storageBucket: "dormforu-7b616.appspot.com",
            messagingSenderId: "436778556124",
            appId: "1:436778556124:web:1976c949b7c64aaf4cf219",
            measurementId: "G-82VETSJ9N5"
          }; 
         
    // Initialize Firebase
    
    const app =initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database=getDatabase(app);
    const auth = getAuth();
    
    
    signIn.addEventListener('click',(e)=>{
    e.preventDefault();
    var email=document.getElementById('email').value;
    var password=document.getElementById('password').value;
    
    
    signInWithEmailAndPassword(auth, email, password).catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    alert(errorMessage)
    }).then((userCredential) => {
    // Signed in 
    
    const user = userCredential.user;
    if (user){
    alert('welcome you are logged in')
    
    
    }
    
    window.location.href="./bookingg.html"
    
    });
    
    })
    
    signUp.addEventListener('click',(e)=>{
        e.preventDefault();
      var email=document.getElementById('email1').value;
      var password=document.getElementById('password1').value;
      var username=document.getElementById('username').value;
      createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
      // Signed in 
      const user = userCredential.user;
    
    set(ref(database,'user/'+user.uid),{
        username:username,
        email:email,
       
      });
      
      alert("user created")
      
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
      alert(errorMessage)
      // ..
    });
    
     
      // ...
    
    })
</script>    







   </body>
</html>